services:
  # PixPort PHP 服务（使用 SQLite 轻量级数据库）
  pixport-app:
    build: .
    image: pixport:latest
    container_name: pixport
    ports:
      - "27668:80"  # 映射到端口 27668
    volumes:
      # 挂载转换后的图片目录（持久化）
      - ./converted:/var/www/html/converted:rw
      # 挂载原始图片目录
      - ./images:/var/www/html/images:rw
      # 挂载相册数据
      - ./data:/var/www/html/data:rw
      # 挂载 SQLite 数据库（持久化）
      - ./database:/var/www/html/database:rw
      # 挂载配置文件
      - ./config:/var/www/html/config:rw
    environment:
      - TZ=Asia/Shanghai
      - ADMIN_USER=${ADMIN_USER:-admin}        # 修改为你的访问账号
      - ADMIN_PASSWORD=${ADMIN_PASSWORD:-admin123}  # 修改为你的访问密码
    restart: unless-stopped
    networks:
      - pixport-network

networks:
  pixport-network:
    driver: bridge